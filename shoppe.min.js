window.shoppeJs=function(){function r(){for(var a=0;a<c.getCartTotalList().length;a++)c.getCartTotalList()[a].innerHTML=u(b.options.currency)+parseFloat(b.getCartTotal()).toFixed(2);for(a=0;a<c.getShopItemCountList().length;a++)c.getShopItemCountList()[a].innerHTML=b.getItems().length;for(a=0;a<c.getCartViewList().length;a++){var g=c.getCartViewList()[a],e=null===h.getElementById(c.cartList)?h.createElement("table"):h.getElementById(c.cartList),d=null===h.getElementById(c.cartHeadings)?h.createElement("thead"):
h.getElementById(c.cartHeadings);e.id=c.cartList;e.style="display: table; border-spacing: 2px; border-color: grey; width: 100%; text-align: left";0===d.id.length&&(d.id=c.cartHeadings,d.appendChild(x()),e.appendChild(d));var f=[];if(0===b.getItems().length){if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}else if(null!==e)for(d=0;d<e.children.length;d++){var l=e.children[d];l.id!==c.cartHeadings&&!1===v(l,b.getItems(),"id")&&f.push(l)}for(d=0;d<f.length;d++)e.removeChild(f[d]);for(d=0;d<
b.getItems().length;d++)if(f=b.getItems()[d],l=null===h.getElementById(c.cartItem+f.getId())?h.createElement("tr"):h.getElementById(c.cartItem+f.getId()),l.id!==c.cartItem+f.getId()){var f=l,l=b.getItems()[d],q=void 0,p=void 0,m=void 0,n=void 0,k=void 0,q=h.createElement("td");q.innerHTML=l.getName();q.style="padding-right: 5px";m=h.createElement("td");m.innerHTML=u(b.options.currency)+l.getPrice().toFixed(2);m.style="padding-right: 5px";k=h.createElement("td");k.innerHTML=l.getQuantity();k.style=
"padding-right: 5px";k.id=c.cartItem+l.getId()+"q";n=h.createElement("td");p=h.createElement("span");p.innerHTML="Remove";p.style="text-decoration: underline; cursor: pointer";p.onclick=y(l);n.appendChild(p);f.id=c.cartItem+l.getId();f.appendChild(q);f.appendChild(m);f.appendChild(k);f.appendChild(n);e.appendChild(f)}else for(q=0;q<l.children.length;q++)p=l.children[q],p.id.substring(0,p.id.length-1)===l.id&&(p.innerHTML=f.getQuantity());g.appendChild(e)}}function v(a,b,e){for(var d=!1,f=0;f<b.length;f++)if(a[e]===
b[f][e]||a[e]===c.cartItem+b[f][e])d=!0;return d}function w(a,g){a=new m(a);void 0!==g&&(a.element=h.getElementById(g));if(v(a,b.getItems(),"id"))for(var e=0;e<b.getItems().length;e++){if(a.getId()===b.getItems()[e].getId()){b.getItems()[e].setQuantity(b.getItems()[e].getQuantity()+1);b.total=parseFloat(b.total);b.total+=a.getPrice();b.total.toFixed(2);break}}else a.setQuantity(1),b.getItems().push(a),b.total=parseFloat(b.total),b.total+=a.getPrice(),b.total.toFixed(2);n.setItem(c.itemsStorage,JSON.stringify(b.getItems()));
r()}function z(a){return function(){w(a)}}function y(a){return function(){for(var g=0;g<b.getItems().length;g++)if(b.getItems()[g].getId()===a.getId()){1===a.getQuantity()?b.getItems().splice(g,1):b.getItems()[g].setQuantity(a.getQuantity()-1);b.total=parseFloat(b.total);b.total-=a.getPrice();b.total.toFixed(2);break}n.setItem(c.itemsStorage,JSON.stringify(b.getItems()));r()}}function m(a){if(void 0===a)return console.error("shoppeJs: Empty item"),{};this.id=void 0!==a.id?a.id:null;this.name=void 0!==
a.name?a.name:null;this.description=void 0!==a.description?a.description:null;this.price=void 0!==a.price?a.price:null;this.quantity=void 0!==a.quantity?a.quantity:null;this.element=void 0!==a.element?a.element:null}function k(){this.itemMainName="shoppe-item";this.itemName="item-name";this.itemDescription="item-description";this.itemPrice="item-price";this.optionsStorage="shoppe-options";this.itemsStorage="shoppe-items";this.itemCount="shoppe-item-count";this.addCallback="shoppe-add";this.cartView=
"shoppe-cart";this.cartHeadings="shoppe-cart-heading";this.cartList="shoppe-cart-list";this.cartItem="shoppe-cart-item-";this.cartTotal="shoppe-cart-total";this.shopItemList=[];this.shopItemCountList=[];this.cartTotalList=[];this.cartViewList=[];this.zero="0.00"}function x(){var a=h.createElement("tr"),b=h.createElement("th"),c=h.createElement("th"),d=h.createElement("th"),f=h.createElement("th");b.innerHTML="Name";c.innerHTML="Cost";d.innerHTML="Quantity";f.innerHTML="";a.appendChild(b);a.appendChild(c);
a.appendChild(d);a.appendChild(f);return a}function u(a){switch(a){case "GBP":a="&pound;";break;case "USD":a="$";break;default:a="$"}return a}var c=new k,n=window.sessionStorage,h=document,t={currency:"GBP",payment:{type:"Paypal",username:""}},b={init:function(a){c.setShopItemList(h.getElementsByClassName(c.itemMainName));c.setShopItemCountList(h.getElementsByClassName(c.itemCount));c.setCartTotalList(h.getElementsByClassName(c.cartTotal));c.setCartViewList(h.getElementsByClassName(c.cartView));b.total=
c.zero;void 0===a&&(a={},void 0!==n.getItem(c.optionsStorage)&&(a=JSON.parse(n.getItem(c.optionsStorage)),null===a&&(a={})));for(var g in a)a.hasOwnProperty(g)&&(t[g]=a[g]);a=t;g=[];if(void 0!==n.getItem(c.itemsStorage)){var e=[],e=""===n.getItem(c.itemsStorage)?[]:JSON.parse(n.getItem(c.itemsStorage));null===e&&(e=[]);for(var d=0;d<e.length;d++)b.total=parseFloat(b.total),b.total+=e[d].price,b.total.toFixed(2),g.push(new m(e[d]))}b.options=a;b.items=g;n.setItem(c.optionsStorage,JSON.stringify(a));
for(a=0;a<c.getShopItemList().length;a++){g=c.getShopItemList()[a];for(var f,l,k,p,e=0;e<g.children.length;e++)d=g.children[e],d.id===c.itemName&&(f=d),d.id===c.itemDescription&&(l=d),d.id===c.itemPrice&&(k=d),d.id===c.addCallback&&(p=d);g=new m({id:g.id,name:f.innerHTML,description:l.innerHTML,price:parseFloat(k.innerHTML),element:g});p&&(p.onclick=z(g));k.innerHTML=u(b.options.currency)+k.innerHTML}r()},setOptions:function(a){for(var c in a)a.hasOwnProperty(c)&&(t[c]=a[c]);b.options=t},getItems:function(){return b.items},
getCartTotal:function(){return b.total},addItem:function(a,b){w(a,b)},clearItems:function(){b.items.length=0;b.items=[];b.total=c.zero;n.setItem(c.itemsStorage,"");r()},dispose:function(){n.clear();b.items=[];b.options=[];b.total=c.zero},attachCallback:function(a,c,e){for(var d=0;d<b.items.length;d++)b.items[d].getId()===a&&(b.items[d].element[c]=e)}};m.prototype.getId=function(){return this.id};m.prototype.setId=function(a){this.id=a};m.prototype.getName=function(){return this.name};m.prototype.setName=
function(a){this.name=a};m.prototype.getQuantity=function(){return this.quantity};m.prototype.setQuantity=function(a){this.quantity=a};m.prototype.getPrice=function(){return this.price};m.prototype.setPrice=function(a){this.price=a};k.prototype.getShopItemList=function(){return this.shopItemList};k.prototype.setShopItemList=function(a){this.shopItemList=a};k.prototype.getShopItemCountList=function(){return this.shopItemCountList};k.prototype.setShopItemCountList=function(a){this.shopItemCountList=
a};k.prototype.getCartViewList=function(){return this.cartViewList};k.prototype.setCartViewList=function(a){this.cartViewList=a};k.prototype.getCartTotalList=function(){return this.cartTotalList};k.prototype.setCartTotalList=function(a){this.cartTotalList=a};return b}();