window.shoppeJs=function(){function r(){for(var a=0;a<c.getCartTotalList().length;a++)c.getCartTotalList()[a].innerHTML=u(b.getOptions().currency)+parseFloat(b.getCartTotal()).toFixed(2);for(a=0;a<c.getShopItemCountList().length;a++)c.getShopItemCountList()[a].innerHTML=b.getItems().length;for(a=0;a<c.getCartViewList().length;a++){var g=c.getCartViewList()[a],e=null===f.getElementById(c.cartList)?f.createElement("table"):f.getElementById(c.cartList),d=null===f.getElementById(c.cartHeadings)?f.createElement("thead"):
f.getElementById(c.cartHeadings);e.id=c.cartList;e.style="display: table; border-spacing: 2px; border-color: grey; width: 100%; text-align: left";0===d.id.length&&(d.id=c.cartHeadings,d.appendChild(y()),e.appendChild(d));var h=[];if(0===b.getItems().length){if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}else if(null!==e)for(d=0;d<e.children.length;d++){var l=e.children[d];l.id!==c.cartHeadings&&!1===w(l,b.getItems(),"id")&&h.push(l)}for(d=0;d<h.length;d++)e.removeChild(h[d]);for(d=0;d<
b.getItems().length;d++)if(h=b.getItems()[d],l=null===f.getElementById(c.cartItem+h.getId())?f.createElement("tr"):f.getElementById(c.cartItem+h.getId()),l.id!==c.cartItem+h.getId()){var h=l,l=b.getItems()[d],k=void 0,p=void 0,n=void 0,m=void 0,q=void 0,k=f.createElement("td");k.innerHTML=l.getName();k.style="padding-right: 5px";n=f.createElement("td");n.innerHTML=u(b.getOptions().currency)+l.getPrice().toFixed(2);n.style="padding-right: 5px";q=f.createElement("td");q.innerHTML=l.getQuantity();q.style=
"padding-right: 5px";q.id=c.cartItem+l.getId()+"q";m=f.createElement("td");p=f.createElement("span");p.innerHTML="Remove";p.style="text-decoration: underline; cursor: pointer";p.onclick=z(l);m.appendChild(p);h.id=c.cartItem+l.getId();h.appendChild(k);h.appendChild(n);h.appendChild(q);h.appendChild(m);e.appendChild(h)}else for(k=0;k<l.children.length;k++)p=l.children[k],p.id.substring(0,p.id.length-1)===l.id&&(p.innerHTML=h.getQuantity());g.appendChild(e)}}function w(a,b,e){for(var d=!1,f=0;f<b.length;f++)if(a[e]===
b[f][e]||a[e]===c.cartItem+b[f][e])d=!0;return d}function x(a,g){a=new k(a);void 0!==g&&(a.element=f.getElementById(g));if(w(a,b.getItems(),"id"))for(var e=0;e<b.getItems().length;e++){if(a.getId()===b.getItems()[e].getId()){b.getItems()[e].setQuantity(b.getItems()[e].getQuantity()+1);b.total=parseFloat(b.total);b.total+=a.getPrice();b.total.toFixed(2);break}}else a.setQuantity(1),b.getItems().push(a),b.total=parseFloat(b.total),b.total+=a.getPrice(),b.total.toFixed(2);n.setItem(c.itemsStorage,JSON.stringify(b.getItems()));
r()}function A(a){return function(){x(a)}}function z(a){return function(){for(var g=0;g<b.getItems().length;g++)if(b.getItems()[g].getId()===a.getId()){1===a.getQuantity()?b.getItems().splice(g,1):b.getItems()[g].setQuantity(a.getQuantity()-1);b.total=parseFloat(b.total);b.total-=a.getPrice();b.total.toFixed(2);break}n.setItem(c.itemsStorage,JSON.stringify(b.getItems()));r()}}function k(a){if(void 0===a)return console.error("shoppeJs: Empty item"),{};this.id=void 0!==a.id?a.id:null;this.name=void 0!==
a.name?a.name:null;this.description=void 0!==a.description?a.description:null;this.price=void 0!==a.price?a.price:null;this.quantity=void 0!==a.quantity?a.quantity:null;this.element=void 0!==a.element?a.element:null}function m(){this.itemMainName="shoppe-item";this.itemName="item-name";this.itemDescription="item-description";this.itemPrice="item-price";this.optionsStorage="shoppe-options";this.itemsStorage="shoppe-items";this.itemCount="shoppe-item-count";this.addCallback="shoppe-add";this.cartView=
"shoppe-cart";this.cartHeadings="shoppe-cart-heading";this.cartList="shoppe-cart-list";this.cartItem="shoppe-cart-item-";this.cartTotal="shoppe-cart-total";this.shopItemList=[];this.shopItemCountList=[];this.cartTotalList=[];this.cartViewList=[];this.zero="0.00"}function y(){var a=f.createElement("tr"),b=f.createElement("th"),c=f.createElement("th"),d=f.createElement("th"),h=f.createElement("th");b.innerHTML="Name";c.innerHTML="Cost";d.innerHTML="Quantity";h.innerHTML="";a.appendChild(b);a.appendChild(c);
a.appendChild(d);a.appendChild(h);return a}function u(a){switch(a){case "GBP":a="&pound;";break;case "USD":a="$";break;default:a="$"}return a}var c=new m,n=window.sessionStorage,f=document,t={currency:"GBP",payment:{type:"Paypal",username:""}},b={init:function(a){c.setShopItemList(f.getElementsByClassName(c.itemMainName));c.setShopItemCountList(f.getElementsByClassName(c.itemCount));c.setCartTotalList(f.getElementsByClassName(c.cartTotal));c.setCartViewList(f.getElementsByClassName(c.cartView));b.total=
c.zero;void 0===a&&(a={},void 0!==n.getItem(c.optionsStorage)&&(a=JSON.parse(n.getItem(c.optionsStorage)),null===a&&(a={})));for(var g in a)a.hasOwnProperty(g)&&(t[g]=a[g]);a=t;g=[];if(void 0!==n.getItem(c.itemsStorage)){var e=[],e=""===n.getItem(c.itemsStorage)?[]:JSON.parse(n.getItem(c.itemsStorage));null===e&&(e=[]);for(var d=0;d<e.length;d++){var h=new k(e[d]);g.push(new k(h));b.total=parseFloat(b.total);b.total+=h.getPrice()*h.getQuantity();b.total.toFixed(2)}}b.options=a;b.items=g;n.setItem(c.optionsStorage,
JSON.stringify(a));for(a=0;a<c.getShopItemList().length;a++){g=c.getShopItemList()[a];for(var l,m,p,v,e=0;e<g.children.length;e++)d=g.children[e],d.id===c.itemName&&(l=d),d.id===c.itemDescription&&(m=d),d.id===c.itemPrice&&(p=d),d.id===c.addCallback&&(v=d);g=new k({id:g.id,name:l.innerHTML,description:m.innerHTML,price:parseFloat(p.innerHTML),element:g});v&&(v.onclick=A(g));p.innerHTML=u(b.getOptions().currency)+p.innerHTML}r()},getOptions:function(){return b.options},setOptions:function(a){for(var c in a)a.hasOwnProperty(c)&&
(t[c]=a[c]);b.options=t},checkout:function(a){void 0===a&&(a=b.getItems());if("paypal"===b.getOptions().payment.type.toLowerCase()){var c=f.createElement("form");c.setAttribute("style","display:none;");c.setAttribute("action","https://www.paypal.com/cgi-bin/webscr");c.setAttribute("method","POST");for(var e=0;e<a.length;e++){var d=f.createElement("input");d.setAttribute("type","hidden");d.setAttribute("name",a[e].getName());d.nodeValue=a[e].getPrice();c.appendChild(d)}f.body.appendChild(c);c.submit();
c.remove()}},getItems:function(){return b.items},setItems:function(a){b.items=a},getCartTotal:function(){return b.total},addItem:function(a,b){x(a,b)},clearItems:function(){b.items.length=0;b.items=[];b.total=c.zero;n.setItem(c.itemsStorage,"");r()},dispose:function(){n.clear();b.items=[];b.options=[];b.total=c.zero},attachCallback:function(a,c,e){for(var d=0;d<b.items.length;d++)b.items[d].getId()===a&&(b.items[d].element[c]=e)}};k.prototype.getId=function(){return this.id};k.prototype.setId=function(a){this.id=
a};k.prototype.getName=function(){return this.name};k.prototype.setName=function(a){this.name=a};k.prototype.getQuantity=function(){return this.quantity};k.prototype.setQuantity=function(a){this.quantity=a};k.prototype.getPrice=function(){return this.price};k.prototype.setPrice=function(a){this.price=a};m.prototype.getShopItemList=function(){return this.shopItemList};m.prototype.setShopItemList=function(a){this.shopItemList=a};m.prototype.getShopItemCountList=function(){return this.shopItemCountList};
m.prototype.setShopItemCountList=function(a){this.shopItemCountList=a};m.prototype.getCartViewList=function(){return this.cartViewList};m.prototype.setCartViewList=function(a){this.cartViewList=a};m.prototype.getCartTotalList=function(){return this.cartTotalList};m.prototype.setCartTotalList=function(a){this.cartTotalList=a};return b}();
